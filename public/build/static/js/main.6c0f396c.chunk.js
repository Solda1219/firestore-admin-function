(this["webpackJsonpmern-auth"]=this["webpackJsonpmern-auth"]||[]).push([[0],{173:function(e,a,t){e.exports=t(251)},250:function(e,a,t){},251:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(16),l=t.n(i),o=t(29),s=t.n(o),c=t(38),u=t(12),m=t(34),d=t(13),p=(t(44),Object(n.createContext)(null));function f(){var e=Object(n.useContext)(p),a=e.userData,t=e.setUserData,i=Object(d.g)();return r.a.createElement("nav",{className:"auth-options"},a.user?r.a.createElement("button",{onClick:function(){t({token:void 0,user:void 0}),localStorage.setItem("auth-token",""),localStorage.setItem("displayName",""),i.push("/")}},"Log out"):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return i.push("/login")}},"Log in")))}function g(){return r.a.createElement("header",{id:"header"},r.a.createElement(m.b,{to:"/"},r.a.createElement("h1",{className:"title"},"Theo")),r.a.createElement(f,null))}function b(){var e=Object(d.g)();return Object(n.useContext)(p).userData.user&&e.push("/pos"),r.a.createElement(r.a.Fragment,null)}var h=t(286),v=t(287),E=t(304),O=t(158),j=t(288),x=t(302),y=t(289),C=t(290),S=t(291),k=t(68),N=t.n(k),T=t(285),w=t(21),U=t(40),q=Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function D(){var e=q(),a=Object(U.useToasts)().addToast,t=Object(n.useState)((function(){return""})),i=Object(u.a)(t,2),l=i[0],o=i[1],m=Object(n.useState)((function(){return""})),f=Object(u.a)(m,2),g=f[0],b=f[1],k=Object(n.useContext)(p).setUserData,T=Object(d.g)(),D=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{({email:l,password:g}),k({token:"theo",user:"theo"}),localStorage.setItem("auth-token","theo"),localStorage.setItem("displayName","theo"),T.push("/pos")}catch(n){a(n.response.data.msg,{appearance:"error",autoDismiss:!0,marginTop:"30px"})}case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(h.a,{component:"main",maxWidth:"xs"},r.a.createElement(v.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(E.a,{className:e.avatar},r.a.createElement(N.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(w.ValidatorForm,{className:e.form,noValidate:!0,onSubmit:D},r.a.createElement(w.TextValidator,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return o(e.target.value)},value:l,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"]}),r.a.createElement(w.TextValidator,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return b(e.target.value)},value:g,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement(j.a,{control:r.a.createElement(x.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,xs:!0},r.a.createElement(S.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(C.a,{item:!0},r.a.createElement(S.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up"))))))}Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var I=t(101),P=Object(n.createContext)(null),V=t(153),W=t.n(V),F=t(5),M=t(15),A=t(297),R=t(298),L=t(294),B=t(296),z=t(292),H=t(301),J=t(293),G=t(305),K=t(295),Y=t(141),_=t(299);function Q(e,a,t){return a[t]<e[t]?-1:a[t]>e[t]?1:0}var X=[{id:"id",numeric:!1,disablePadding:!1,label:"Id"},{id:"firstname",numeric:!1,disablePadding:!0,label:"First Name"},{id:"lastname",numeric:!0,disablePadding:!1,label:"Last Name"},{id:"email",numeric:!0,disablePadding:!1,label:"Email"}];function Z(e){var a=e.classes,t=e.order,n=e.orderBy,i=e.onRequestSort;return r.a.createElement(z.a,null,r.a.createElement(J.a,null,X.map((function(e){return r.a.createElement(L.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&t},r.a.createElement(G.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(l=e.id,function(e){i(e,l)})},e.label,n===e.id?r.a.createElement("span",{className:a.visuallyHidden},"desc"===t?"sorted descending":"sorted ascending"):null));var l}))))}var $=Object(T.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(M.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),ee=function(e){var a=$(),t=e.numSelected,i=r.a.useState(""),l=Object(u.a)(i,2),o=l[0],s=l[1],c=Object(n.useContext)(P),m=(c.setUsers,c.users),d=c.setfilteredUsers;c.filteredUsers;""===o&&d(m);return r.a.createElement(K.a,{className:Object(F.a)(a.root,Object(I.a)({},a.highlight,t>0))},t>0?r.a.createElement(O.a,{className:a.title,color:"inherit",variant:"subtitle1",component:"div"},t," selected"):r.a.createElement(O.a,{className:a.title,variant:"h6",id:"tableTitle",component:"div"},"Users"),r.a.createElement(W.a,{value:o,onChange:function(e){return function(e){s(e),d(m.filter((function(e){return-1!==String(e.firstname+e.lastname+e.email).indexOf(String(o))})))}(e)}}))},ae=Object(T.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function te(){var e=Object(d.g)(),a=ae(),t=r.a.useState("asc"),i=Object(u.a)(t,2),l=i[0],o=i[1],s=r.a.useState("calories"),c=Object(u.a)(s,2),m=c[0],f=c[1],g=r.a.useState(0),b=Object(u.a)(g,2),h=b[0],v=b[1],E=r.a.useState(!1),O=Object(u.a)(E,2),x=O[0],C=O[1],S=r.a.useState(5),k=Object(u.a)(S,2),N=k[0],T=k[1],w=Object(n.useContext)(P),U=(w.setUsers,w.users,w.setfilteredUsers,w.filteredUsers),q=Object(n.useContext)(p),D=(q.editedUser,q.setEditedUser);var I=N-Math.min(N,U.length-h*N);return r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{onClick:function(){e.push("/userCreate")},variant:"contained",color:"primary",style:{marginBottom:10}},"+Create"),r.a.createElement(Y.a,{className:a.paper},r.a.createElement(ee,null),r.a.createElement(B.a,null,r.a.createElement(A.a,{className:a.table,"aria-labelledby":"tableTitle",size:x?"small":"medium","aria-label":"enhanced table"},r.a.createElement(Z,{classes:a,order:l,orderBy:m,onRequestSort:function(e,a){o(m===a&&"asc"===l?"desc":"asc"),f(a)},rowCount:U.length}),r.a.createElement(R.a,null,function(e,a){var t=e.map((function(e,a){return[e,a]}));return t.sort((function(e,t){var n=a(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),t.map((function(e){return e[0]}))}(U,function(e,a){return"desc"===e?function(e,t){return Q(e,t,a)}:function(e,t){return-Q(e,t,a)}}(l,m)).slice(h*N,h*N+N).map((function(a,t){var n="enhanced-table-checkbox-".concat(t);return r.a.createElement(J.a,{hover:!0,onClick:function(t){return function(a,t){console.log(t),D(t),e.push("/userEdit")}(0,a)},role:"checkbox",tabIndex:-1,key:a.id},r.a.createElement(L.a,{p:1},a.id),r.a.createElement(L.a,{component:"th",id:n,scope:"filteredUser",padding:"none"},a.firstname),r.a.createElement(L.a,{align:"right"},a.lastname),r.a.createElement(L.a,{align:"right"},a.email))})),I>0&&r.a.createElement(J.a,{style:{height:(x?33:53)*I}},r.a.createElement(L.a,{colSpan:6}))))),r.a.createElement(H.a,{rowsPerPageOptions:[5,10,25],component:"div",count:U.length,rowsPerPage:N,page:h,onChangePage:function(e,a){v(a)},onChangeRowsPerPage:function(e){T(parseInt(e.target.value,10)),v(0)}})),r.a.createElement(j.a,{control:r.a.createElement(_.a,{checked:x,onChange:function(e){C(e.target.checked)}}),label:"Dense padding"}))}t(154),t(104),t(155);var ne=t(42);t(116);function re(){var e=Object(n.useState)([]),a=Object(u.a)(e,2),t=a[0],i=a[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),s=o[0],c=o[1];return Object(n.useEffect)((function(){console.log("here is effect"),ne.a.database().ref("/users").on("value",(function(e){console.log(e.val()),null!=e.val()&&(console.log("really??"),i(e.val()))})),console.log("DATA RETRIEVED")}),[]),r.a.createElement(P.Provider,{value:{users:t,setUsers:i,filteredUsers:s,setfilteredUsers:c}},r.a.createElement(C.a,{container:!0,spacing:1,style:{marginTop:"38px"}},r.a.createElement(C.a,{item:!0,xs:12,sm:12},r.a.createElement(te,null))))}var ie=Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function le(){var e=ie(),a=(Object(U.useToasts)().addToast,Object(n.useContext)(p)),t=a.editedUser,i=(a.setEditedUser,Object(n.useState)((function(){return t.email}))),l=Object(u.a)(i,2),o=l[0],m=l[1],f=Object(n.useState)((function(){return t.firstname})),g=Object(u.a)(f,2),b=g[0],E=g[1],j=Object(n.useState)((function(){return t.lastname})),x=Object(u.a)(j,2),S=x[0],k=x[1],N=Object(d.g)();function T(e,a,t,n){ne.a.database().ref("/users/"+e).set({id:e,firstname:a,lastname:t,email:n})}var q=function(){var e=Object(c.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("submit"),a.preventDefault(),T(t.id,b,S,o),N.push("/pos");case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(h.a,{component:"main",maxWidth:"xs"},r.a.createElement(v.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(O.a,{component:"h1",variant:"h5"},"User Update"),r.a.createElement(w.ValidatorForm,{className:e.form,noValidate:!0,onSubmit:q},r.a.createElement(C.a,{container:!0,spacing:2},r.a.createElement(C.a,{item:!0,xs:12,sm:6},r.a.createElement(w.TextValidator,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",onChange:function(e){return E(e.target.value)},autoFocus:!0,value:b,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(C.a,{item:!0,xs:12,sm:6},r.a.createElement(w.TextValidator,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",onChange:function(e){return k(e.target.value)},autoComplete:"lname",value:S,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(w.TextValidator,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",onChange:function(e){return m(e.target.value)},value:o,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"]}))),r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Update"))))}var oe=Object(T.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function se(){var e=oe(),a=(Object(U.useToasts)().addToast,Object(n.useContext)(p)),t=(a.editedUser,a.setEditedUser,Object(n.useState)((function(){return""}))),i=Object(u.a)(t,2),l=i[0],o=i[1],m=Object(n.useState)((function(){return""})),f=Object(u.a)(m,2),g=f[0],b=f[1],E=Object(n.useState)((function(){return""})),j=Object(u.a)(E,2),x=j[0],S=j[1],k=Object(n.useState)((function(){return 1})),N=Object(u.a)(k,2),T=N[0],q=N[1],D=Object(d.g)();function I(e,a,t,n){ne.a.database().ref("/users/"+e).set({id:e,firstname:a,lastname:t,email:n})}Object(n.useEffect)((function(){ne.a.database().ref("/users").on("value",(function(e){e.val().length>0&&q(e.val().length)})),console.log("DATA RETRIEVED")}),[]);var P=function(){var e=Object(c.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("submit"),a.preventDefault(),I(T,g,x,l),D.push("/pos");case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(h.a,{component:"main",maxWidth:"xs"},r.a.createElement(v.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(O.a,{component:"h1",variant:"h5"},"User Create"),r.a.createElement(w.ValidatorForm,{className:e.form,noValidate:!0,onSubmit:P},r.a.createElement(C.a,{container:!0,spacing:2},r.a.createElement(C.a,{item:!0,xs:12,sm:6},r.a.createElement(w.TextValidator,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",onChange:function(e){return b(e.target.value)},autoFocus:!0,value:g,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(C.a,{item:!0,xs:12,sm:6},r.a.createElement(w.TextValidator,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",onChange:function(e){return S(e.target.value)},autoComplete:"lname",value:x,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(w.TextValidator,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",onChange:function(e){return o(e.target.value)},value:l,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"]}))),r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Create"))))}var ce=t(60),ue={apiKey:"AIzaSyAvlWY8Hhz59Miea4GnHH_kBcxzd2l1jOM",authDomain:"backendkopie.firebaseapp.com",projectId:"backendkopie",storageBucket:"backendkopie.appspot.com",messagingSenderId:"985834946681",databaseURL:"https://backendkopie-default-rtdb.firebaseio.com",appId:"1:985834946681:web:738d3a00e6bae95228d4a8"},me=(t(250),function(e,a,t){e.meta.auth?(""!==localStorage.getItem("displayName")&&t(),t.redirect("/login")):t()});function de(){var e=Object(n.useState)({token:void 0,user:void 0}),a=Object(u.a)(e,2),t=a[0],i=a[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),s=o[0],c=o[1];return Object(n.useEffect)((function(){ne.a.initializeApp(ue)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(p.Provider,{value:{userData:t,setUserData:i,editedUser:s,setEditedUser:c}},r.a.createElement(g,null),r.a.createElement(U.ToastProvider,null,r.a.createElement("div",{className:"container"},r.a.createElement(ce.a,{guards:[me]},r.a.createElement(d.d,null,r.a.createElement(ce.b,{exact:!0,path:"/",component:b}),r.a.createElement(ce.b,{path:"/login",component:D}),r.a.createElement(ce.b,{path:"/pos",component:re,meta:{auth:!0}}),r.a.createElement(ce.b,{path:"/userEdit",component:le,meta:{auth:!0}}),r.a.createElement(ce.b,{path:"/userCreate",component:se,meta:{auth:!0}}))))))))}l.a.render(r.a.createElement(de,null),document.querySelector("#root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.6c0f396c.chunk.js.map